{% load static %}
<footer class="py-4 bg-light mt-auto">
    <div class="container-fluid">
        <div class="d-flex align-items-center justify-content-between small">
            <div class="text-muted">Copyright &copy; Your Website 2019</div>
            <div>
                <a href="#">Privacy Policy</a>
                &middot;
                <a href="#">Terms &amp; Conditions</a>
            </div>
        </div>
    </div>
</footer>
</div>
</div>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script src="{% static 'admin/dist/js/scripts.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
<script src="{% static 'admin/dist/assets/demo/chart-area-demo.js' %}"></script>
<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js" crossorigin="anonymous"></script>
<script src="{% static 'admin/dist/assets/demo/datatables-demo.js' %}"></script>

<script>
    $( document ).ready(function() {

$.ajax({
        url: '/get_results/',
        success: function (data) {

          if(data.results){

                                // Set new default font family and font color to mimic Bootstrap's default styling
                Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
                Chart.defaults.global.defaultFontColor = '#292b2c';

                // Bar Chart Example
                var ctx = document.getElementById("myBarChart");
                var myLineChart = new Chart(ctx, {
                  type: 'bar',
                  data: {
                    labels: ["Positive","Negative", "Inconclusive"],
                    datasets: [{
                      label: "Total",
                      backgroundColor: "rgba(2,117,216,1)",
                      borderColor: "rgba(2,117,216,1)",
                      data: data.results,
                    }],
                  },
                  options: {
                    scales: {
                      xAxes: [{
                        time: {
                          unit: 'month'
                        },
                        gridLines: {
                          display: false
                        },
                        ticks: {
                          maxTicksLimit: 6
                        }
                      }],
                      yAxes: [{
                        ticks: {
                          min: 0,
                          max: 50,
                          maxTicksLimit: 5
                        },
                        gridLines: {
                          display: true
                        }
                      }],
                    },
                    legend: {
                      display: false
                    }
                  }
                });

          }
        }
      });

$.ajax({
        url: '/get_positive_by_age/',
        success: function (data) {

          if(data.results){

                                // Set new default font family and font color to mimic Bootstrap's default styling
                Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
                Chart.defaults.global.defaultFontColor = '#292b2c';

                // Bar Chart Example
                var ctx = document.getElementById("myBarChart2");
                var myLineChart = new Chart(ctx, {
                  type: 'bar',
                  data: {
                    labels: ["0-20","20-40", "40-60","60+"],
                    datasets: [{
                      label: "Total",
                      backgroundColor: "rgba(2,117,216,1)",
                      borderColor: "rgba(2,117,216,1)",
                      data: data.results,
                    }],
                  },
                  options: {
                    scales: {
                      xAxes: [{
                        time: {
                          unit: 'month'
                        },
                        gridLines: {
                          display: false
                        },
                        ticks: {
                          maxTicksLimit: 6
                        }
                      }],
                      yAxes: [{
                        ticks: {
                          min: 0,
                          max: 50,
                          maxTicksLimit: 5
                        },
                        gridLines: {
                          display: true
                        }
                      }],
                    },
                    legend: {
                      display: false
                    }
                  }
                });

          }
        }
      });

$.ajax({
        url: '/get_infection_by_age/',
        success: function (data) {

          if(data.results){

                                // Set new default font family and font color to mimic Bootstrap's default styling
                Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
                Chart.defaults.global.defaultFontColor = '#292b2c';

                // Bar Chart Example
                var ctx = document.getElementById("myBarChart4");
                var myLineChart = new Chart(ctx, {
                  type: 'bar',
                  data: {
                    labels: ["0-20","20-40", "40-60","60+"],
                    datasets: [{
                      label: "Total",
                      backgroundColor: "rgba(2,117,216,1)",
                      borderColor: "rgba(2,117,216,1)",
                      data: data.results,
                    }],
                  },
                  options: {
                    scales: {
                      xAxes: [{
                        time: {
                          unit: 'month'
                        },
                        gridLines: {
                          display: false
                        },
                        ticks: {
                          maxTicksLimit: 6
                        }
                      }],
                      yAxes: [{
                        ticks: {
                          min: 0,
                          max: 100,
                          maxTicksLimit: 5
                        },
                        gridLines: {
                          display: true
                        }
                      }],
                    },
                    legend: {
                      display: false
                    }
                  }
                });

          }
        }
      });


$("#search1").click(function(){
    val = $("#postcode1").val()
    console.log(val);
    $.ajax({
        url: '/get_positive_by_postcode/',
        data:{'postcode':val},
        success: function (data) {

          if(data.results){

                                // Set new default font family and font color to mimic Bootstrap's default styling
                Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
                Chart.defaults.global.defaultFontColor = '#292b2c';

                // Bar Chart Example
                var ctx = document.getElementById("myBarChart3");
                var myLineChart = new Chart(ctx, {
                  type: 'bar',
                  data: {
                    labels: [val],
                    datasets: [{
                      label: "Total",
                      backgroundColor: "rgba(2,117,216,1)",
                      borderColor: "rgba(2,117,216,1)",
                      data: data.results,
                    }],
                  },
                  options: {
                    scales: {
                      xAxes: [{
                        time: {
                          unit: 'month'
                        },
                        gridLines: {
                          display: false
                        },
                        ticks: {
                          maxTicksLimit: 6
                        }
                      }],
                      yAxes: [{
                        ticks: {
                          min: 0,
                          max: 50,
                          maxTicksLimit: 5
                        },
                        gridLines: {
                          display: true
                        }
                      }],
                    },
                    legend: {
                      display: false
                    }
                  }
                });

          }
        }
      });


})


$("#search2").click(function(){
    val = $("#postcode2").val()
    console.log(val);
    $.ajax({
        url: '/get_infection_by_postcode/',
        data:{'postcode':val},
        success: function (data) {

          if(data.results){

                                // Set new default font family and font color to mimic Bootstrap's default styling
                Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
                Chart.defaults.global.defaultFontColor = '#292b2c';

                // Bar Chart Example
                var ctx = document.getElementById("myBarChart5");
                var myLineChart = new Chart(ctx, {
                  type: 'bar',
                  data: {
                    labels: [val],
                    datasets: [{
                      label: "Total",
                      backgroundColor: "rgba(2,117,216,1)",
                      borderColor: "rgba(2,117,216,1)",
                      data: data.results,
                    }],
                  },
                  options: {
                    scales: {
                      xAxes: [{
                        time: {
                          unit: 'month'
                        },
                        gridLines: {
                          display: false
                        },
                        ticks: {
                          maxTicksLimit: 6
                        }
                      }],
                      yAxes: [{
                        ticks: {
                          min: 0,
                          max: 100,
                          maxTicksLimit: 5
                        },
                        gridLines: {
                          display: true
                        }
                      }],
                    },
                    legend: {
                      display: false
                    }
                  }
                });

          }
        }
      });


})


     });



</script>

</body>
</html>
